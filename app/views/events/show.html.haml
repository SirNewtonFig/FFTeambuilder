.mx-3.md:mx-8{ data: { controller: 'counter' } }
  .font-sans.fixed.-mx-3.px-3.md:-mx-8.md:px-8.py-4.top-0.mb-6.w-screen{ class: 'bg-black/75' }
    .max-w-full
      .flex.flex-col.md:flex-row.justify-center.md:items-center.md:justify-between
        %div
          .flex.items-center
            %h1.text-white.text-xl.font-semibold= @event.title
            - if @event.user == current_user
              %a.ml-1.text-sm.text-orange-400.hover:text-orange-300{ href: edit_event_path(@event), data: { turbo_frame: 'modal' } }
                (Edit)
          %div.text-sm
            %span.text-gray-300 Organized by
            %span.text-white.font-semibold= @event.user.username
          %div.text-sm
            %span.text-gray-300= @event.deadline.past? ? 'Submissions closed' : 'Submissions close'
            %span.text-white.font-semibold= @event.deadline.to_formatted_s(:deadline)
          %div.text-sm
            %span.text-gray-300 Submissions:
            %span.text-white.font-semibold= @event.submissions.count
        
        = render 'events/show/actions', event: @event

  .space-y-4{ class: 'mt-[11rem] md:mt-[8.5rem]' }
    - if @event.description.present?
      .font-sans.mb-6.max-w-full.md:max-w-screen-md{ class: 'xl:max-w-[72rem]'}
        = simple_format(@event.description || 'No description provided', class: 'text-gray-300 prose bg-gray-800 p-2 border-l-2 border-orange-500')

    - if @event.show_bracket?
      .flex.items-center.justify-between.max-w-screen-md.mb-2
        .font-sans.flex.items-center
          .text-xs.text-white
            %span.hidden.md:inline View bracket and submit predictions at 
            %span.md:hidden See more at  
          %a.ml-2.flex.items-center.text-xs.text-orange-400.hover:text-orange-300{ href: @event.bracket_url.sub('.svg', ''), target: '_blank', rel: 'noopener noreferer' }
            = inline_svg_tag('icons/challonge.svg', class: 'h-4 mr-1')
            Challonge
            = inline_svg_tag('icons/open_new.svg', class: 'h-4 w-4 ml-1')

        .font-sans.flex.items-center
          %a#memgen-link.flex.items-center.text-xs.text-orange-400.hover:text-orange-300{ href: new_event_memgen_path(@event), data: { turbo_frame: 'memgen' } }
            = inline_svg_tag('icons/memory-card.svg', class: 'h-4 mr-1')
            Build Card

      = turbo_frame_tag(:bracket_frame, src: (event_path(@event) unless turbo_frame?)) do
        - if turbo_frame?
          #bracket.overflow-x-auto.max-w-screen{ class: 'group/bracket', data: { controller: 'bracket', bracket_memgen_menu_outlet: '#memgen-menu'} }
            = parse_bracket(@event).to_html.html_safe
      
    .font-sans.mb-6.max-w-full.md:max-w-screen-md{ class: 'xl:max-w-[72rem]', data: { controller: 'tab', tab_pane_toggle_class_value: 'hidden', tab_active_classes_value: json_escape(['text-white', 'bg-gray-800']), tab_inactive_classes_value: json_escape(['text-gray-600', 'hover:text-gray-200', 'bg-gray-900', 'hover:bg-gray-700']) } }
      %h2.flex.items-stretch{ class: 'space-x-0.5' }
        - if @event.mine?
          #pending-tab.text-sm.font-semibold.px-4.rounded-t-lg.py-1.cursor-pointer{ data: { tab_target: 'tab', action: 'click->tab#click' } }
            Queue
            %span.ml-1.opacity-85.text-xs{ data: { counter_target: 'counter', scope: 'pending' } }
          #confirmed-tab.text-sm.font-semibold.px-4.rounded-t-lg.py-1.cursor-pointer{ data: { tab_target: 'tab', action: 'click->tab#click' } }
            Confirmed
            %span.ml-1.opacity-85.text-xs{ data: { counter_target: 'counter', scope: 'confirmed' } }
          #cut-tab.text-sm.font-semibold.px-4.rounded-t-lg.py-1.cursor-pointer{ data: { tab_target: 'tab', action: 'click->tab#click' } }
            Cuts
            %span.ml-1.opacity-85.text-xs{ data: { counter_target: 'counter', scope: 'cut' } }
        #my-tab.text-sm.font-semibold.px-4.rounded-t-lg.py-1.cursor-pointer{ data: { tab_target: 'tab', action: 'click->tab#click' } }
          My Teams
          %span.ml-1.opacity-85.text-xs{ data: { counter_target: 'counter', scope: 'mine' } }
      
      - if @event.mine?
        #pending-submissions.space-y-2.px-4.bg-gray-800.rounded.rounded-tl-none.hidden{ data: { tab_target: 'pane' } }
          = render 'events/show/submissions', submissions: @submissions, event: @event

        #confirmed-submissions.space-y-2.px-4.bg-gray-800.rounded.rounded-tl-none.hidden{ data: { tab_target: 'pane' } }
          = render 'events/show/bracket', submissions: @bracket, event: @event

        #cut-submissions.space-y-2.px-4.bg-gray-800.rounded.rounded-tl-none.hidden{ data: { tab_target: 'pane' } }
          = render 'events/show/cut_submissions', submissions: @cut_submissions, event: @event

      #my-submissions.space-y-2.px-4.bg-gray-800.rounded.rounded-tl-none.hidden{ data: { tab_target: 'pane' } }
        = render 'events/show/my_submissions', submissions: @my_submissions, event: @event

  = render 'users/menu', back_path: dashboard_path

= turbo_frame_tag :memgen
